########################################
# Vault (Raft) — Client & Auth
########################################

# Vault address (default in code: http://127.0.0.1:8200)
VAULT_ADDR=http://localhost:8200

# --- Auth selection ---
# Choose how the app authenticates to Vault:
#   token      → uses VAULT_TOKEN
#   kubernetes → uses service account JWT + role (no renew)
# Fallback if unset: token if VAULT_TOKEN is set, else kubernetes if JWT file is readable.
# VAULT_AUTH_METHOD=token
# VAULT_AUTH_METHOD=kubernetes

# --- Token auth (Dev/Local) ---
# If using VAULT_AUTH_METHOD=token, this must be provided.
VAULT_TOKEN=

# --- Kubernetes auth (Prod) ---
# Kubernetes auth mount path in Vault (default: kubernetes)
# VAULT_AUTH_MOUNT=kubernetes
# Vault role to use for login (REQUIRED when method=kubernetes)
# VAULT_K8S_ROLE=
# Path to projected service account JWT (default shown below)
# VAULT_K8S_JWT_PATH=/var/run/secrets/kubernetes.io/serviceaccount/token
# Optional audience if you use projected tokens with custom audience
# VAULT_K8S_AUDIENCE=

# --- Optional Vault extras ---
# Namespace (Vault Enterprise)
# VAULT_NAMESPACE=
# TLS options (use either CA cert file or CA path; avoid SkipVerify in prod)
# VAULT_CACERT=
# VAULT_CAPATH=
# VAULT_SKIP_VERIFY=false


########################################
# Backup provider
########################################
BACKUP_PROVIDER=azure


########################################
# Azure configuration
########################################
# Required

# Storage account & container are required
AZURE_STORAGE_ACCOUNT=myaccount
AZURE_STORAGE_CONTAINER=vault-backups

# --- Auth Method A: SAS token (example placeholder) ---
AZURE_STORAGE_SAS=?sv=2025-...

# --- Auth Method B: Service Principal (alternative) ---
# AZURE_CLIENT_ID=
# AZURE_CLIENT_SECRET=
# AZURE_TENANT_ID=

# Optional custom endpoint
# AZURE_BLOB_ENDPOINT=https://myaccount.blob.core.windows.net/


########################################
# Backup / Restore defaults
########################################

# Local snapshot file (optional; defaults to ./snapshot.snap if empty)
BACKUP_SOURCE=

# Remote directory/prefix (no filename; service generates timestamped name)
BACKUP_TARGET=snapshots

# Optional time format (Go layout). Default: 2006-01-02T15-04-05Z
# BACKUP_TIMESTAMP_FORMAT=2006-01-02T15-04-05.000000000Z07:00

# Restore (full key required; must match what backup produced)
RESTORE_SOURCE=snapshots/2025-09-12T14-53-26Z.snap
# Optional local temp file (defaults to ./restored.snap if empty)
RESTORE_TARGET=./restored.snap


########################################
# Retry tuning (optional)
########################################
RETRY_MAX_ATTEMPTS=5
RETRY_INITIAL_DELAY=300ms
RETRY_MAX_DELAY=8s
RETRY_MULTIPLIER=2.0
RETRY_JITTER=true


########################################
# Logging
########################################
LOG_LEVEL=info      # trace|debug|info|warn|error
LOG_FORMAT=json     # json|console
